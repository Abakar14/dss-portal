<form class="registration-form" [formGroup]="registrationForm" (ngSubmit)="onSubmit()">
  <h3>Student Information</h3>
<div formGroupName="student" class="form-group">
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>First Name</mat-label>
      <input matInput placeholder="Enter first name" formControlName="firstName">
      <mat-error *ngIf="hasError('student', 'firstName', 'required')">First name is required</mat-error>
      <mat-error *ngIf="hasError('student', 'firstName', 'minlength')">First name must be at least 2 characters long</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Last Name</mat-label>
      <input matInput placeholder="Enter last name" formControlName="lastName">
      <mat-error *ngIf="hasError('student', 'lastName', 'required')">Last name is required</mat-error>
      <mat-error *ngIf="hasError('student', 'lastName', 'minlength')">Last name must be at least 2 characters long</mat-error>
    </mat-form-field>
 
    <mat-form-field appearance="outline">
      <mat-label>Birth Date</mat-label>
      <input matInput [matDatepicker]="picker" placeholder="MM/DD/YYYY" formControlName="birthDate">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-datepicker #picker></mat-datepicker>
      <mat-error *ngIf="hasError('student', 'birthDate', 'required')">Birth date is required</mat-error>
      
    </mat-form-field>
    <mat-form-field appearance="outline">
      <mat-label>Birth Place</mat-label>
      <input matInput placeholder="Enter birth place" formControlName="birthPlace">
      <mat-error *ngIf="hasError('student','birthPlace', 'required')">Birth place is required</mat-error>

    </mat-form-field>
    
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Nationality</mat-label>
      <input matInput placeholder="Nationality" formControlName="nationality">
    </mat-form-field>


    <h3>Gender</h3>
    <mat-radio-group formControlName="gender" class="gender-group">
      <mat-radio-button *ngFor="let gender of genders" [value]="gender">
        {{ gender }}
      </mat-radio-button>
    </mat-radio-group>
    <mat-error *ngIf="hasError('student', 'gender', 'required')">Please select a gender</mat-error>
  

  <h3>Address</h3>
  <div formGroupName="address">

    <mat-form-field appearance="outline">
      <mat-label>Street</mat-label>
      <input matInput placeholder="Street" formControlName="street">
      <mat-error *ngIf="hasError('student.address', 'street', 'required')">Street is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Street Number</mat-label>
    <input matInput placeholder="streetNumber" formControlName="streetNumber">
    <mat-error *ngIf="hasError('student.address','streetNumber' ,'required')">Street number is required</mat-error>
   </mat-form-field>

   <mat-form-field appearance="outline">
    <mat-label>City</mat-label>
  <input matInput placeholder="city" formControlName="city">
  <mat-error *ngIf="hasError('student.address','city' ,'required')">City is required</mat-error>
 </mat-form-field>
   
   <mat-form-field appearance="outline">
    <mat-label>Postal Code </mat-label>
    <input matInput placeholder="Postal Code" formControlName="postalCode">
    <mat-error *ngIf="hasError('student.address','postalCode', 'required')">Postal code is required</mat-error>
    <mat-error *ngIf="hasError('student.address','postalCode', 'pattern')">Postal code must be a 5-digit number</mat-error>
  </mat-form-field>
  </div>
  
  </div>

<h3>Guardian Information</h3>
<div formArrayName="guardians">
  <div *ngFor="let guardian of guardians.controls; let i = index" [formGroupName]="i">
    <mat-form-field appearance="outline" >
      <mat-label>First Name</mat-label>
      <input matInput placeholder="Enter first name" formControlName="firstName">
      <mat-error *ngIf="hasError('guardian', 'firstName', 'required')">First name is required</mat-error>
      <mat-error *ngIf="hasError('guardian', 'firstName', 'minlength')">First name must be at least 2 characters long</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" >
      <mat-label>Last Name</mat-label>
      <input matInput placeholder="Enter last name" formControlName="lastName">
      <mat-error *ngIf="hasError('guardian', 'lastName', 'required')">Last name is required</mat-error>
      <mat-error *ngIf="hasError('guardian', 'lastName', 'minlength')">Last name must be at least 2 characters long</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" >
      <mat-label>Country</mat-label>
      <input matInput placeholder="Enter Country" formControlName="country">
      <mat-error *ngIf="hasError('guardian', 'country', 'required')">Country is required</mat-error>
    </mat-form-field>
    
    <mat-form-field appearance="outline" >
      <mat-label>Email</mat-label>
      <input matInput placeholder="Enter Email" formControlName="email">
      <mat-error *ngIf="hasError('guardian', 'email', 'required')">Email is required</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" >
      <mat-label>Mobile</mat-label>
      <input matInput placeholder="Enter Mobile" formControlName="mobile">
      <mat-error *ngIf="hasError('guardian', 'mobile', 'required')">Mobile is required</mat-error>
    </mat-form-field>
    
    <mat-form-field appearance="outline" >
      <mat-label>Phone</mat-label>
      <input matInput placeholder="Enter Phone" formControlName="phone">
      <mat-error *ngIf="hasError('guardian', 'phone', 'required')">Phone is required</mat-error>
    </mat-form-field>


    <mat-form-field appearance="outline">
      <mat-label>Gender</mat-label>
      <mat-select formControlName="gender">
        <mat-option *ngFor="let gender of genders" [value]="gender">{{ gender }}</mat-option>
      </mat-select>
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Relationship</mat-label>
      <mat-select formControlName="relationship">
        <mat-option *ngFor="let relationship of relationships" [value]="relationship">
          {{ relationship }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <button mat-raised-button color="warn" (click)="removeGuardian(i)">Remove Guardian</button>
  </div>
</div>

<button mat-raised-button color="primary" (click)="addGuardian()">Add Guardian</button>

  <!-- <div class="form-group" formGroupName="guardian">
    <mat-form-field appearance="outline" >
      <mat-label>First Name</mat-label>
      <input matInput placeholder="Enter first name" formControlName="firstName">
      <mat-error *ngIf="hasError('guardian', 'firstName', 'required')">First name is required</mat-error>
      <mat-error *ngIf="hasError('guardian', 'firstName', 'minlength')">First name must be at least 2 characters long</mat-error>
    </mat-form-field>

    <mat-form-field appearance="outline" >
      <mat-label>Last Name</mat-label>
      <input matInput placeholder="Enter last name" formControlName="lastName">
      <mat-error *ngIf="hasError('guardian', 'lastName', 'required')">Last name is required</mat-error>
      <mat-error *ngIf="hasError('guardian', 'lastName', 'minlength')">Last name must be at least 2 characters long</mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline" >
      <mat-label>Country</mat-label>
      <input matInput placeholder="Enter Country" formControlName="country">
      <mat-error *ngIf="hasError('guardian', 'country', 'required')">Country is required</mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline" >
      <mat-label>Email</mat-label>
      <input matInput placeholder="Enter Email" formControlName="email">
      <mat-error *ngIf="hasError('guardian', 'email', 'required')">Email is required</mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline" >
      <mat-label>Mobile</mat-label>
      <input matInput placeholder="Enter Mobile" formControlName="mobile">
      <mat-error *ngIf="hasError('guardian', 'mobile', 'required')">Mobile is required</mat-error>
    </mat-form-field>
    <mat-form-field appearance="outline" >
      <mat-label>Phone</mat-label>
      <input matInput placeholder="Enter Phone" formControlName="phone">
      <mat-error *ngIf="hasError('guardian', 'phone', 'required')">Phone is required</mat-error>
    </mat-form-field>

    <h3>Guardian Gender</h3>
    <mat-radio-group formControlName="gender" class="gender-group">
      <mat-radio-button *ngFor="let gender of genders" [value]="gender">
        {{ gender }}
      </mat-radio-button>
    </mat-radio-group>
    <mat-error *ngIf="hasError('guardian', 'gender', 'required')">Please select a gender</mat-error>
  
    <h3>Guardian Relationship</h3>
    <mat-radio-group formControlName="relationship" class="relationship-group">
      <mat-radio-button *ngFor="let relationship of relationships" [value]="relationship">
        {{ relationship }}
      </mat-radio-button>
    </mat-radio-group>
    <mat-error *ngIf="hasError('guardian', 'relation', 'required')">Please select a relation</mat-error>
  

  </div> -->

  

  <h3>Consent</h3>
  <mat-checkbox formControlName="consentActivities">Agree to extracurricular activities.</mat-checkbox>
  <mat-error *ngIf="hasError('', 'consentActivities', 'requiredTrue')">You must agree to this consent</mat-error>
  <mat-checkbox formControlName="consentDataProcessing">Agree to data processing.</mat-checkbox>
  <mat-error *ngIf="hasError('', 'consentDataProcessing', 'requiredTrue')">You must agree to this consent</mat-error>

  <h3>Documents Upload</h3>
  <div formArrayName="documents">
    <div *ngFor="let document of documents.controls; let i = index" [formGroupName]="i" class="document-upload">
      <mat-form-field appearance="outline">
        <mat-label>Document Type</mat-label>
        <mat-select formControlName="documentType">
          <mat-option *ngFor="let type of documentTypes" [value]="type">
            {{ type }}
          </mat-option>
        </mat-select>
      </mat-form-field>

      <input type="file" (change)="onFileSelected($event, i)" formControlName="file" />

      <button mat-button color="warn" (click)="removeDocument(i)">Remove Document</button>
    </div>
  </div>

  <button mat-button color="primary" (click)="addDocument()">Add Document</button>


  <div class="button-container">
    <button mat-raised-button color="primary" type="submit">Submit</button>
  </div>
</form>
